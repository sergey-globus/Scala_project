## Используемые версии зависимостей и плагинов

- Scala version: **2.12.18**  
- Spark version: **3.5.0**  
- Java compiler source/target: **11**

## Сборка и запуск

Для сборки проекта (JAR-файла с контейнером всех зависимостей) используется Maven:
```
mvn clean package
```

## В проекте используется слойная архитектура:

- Domain - содержит сущности
- Infrastructure - слой отвечает за получение и преобразование данных в объекты domain, а также низкоуровневые функции
- Service - слой бизнес-логики, оперирует объектами domain
- App - входная точка приложения, запускает обработку и связывает остальные слои, также отвечает за чтение файлов, вывод результатов и работу со Spark


## Объяснение строки с `unknown` в выводе файла

Строка с открытием документа DOC_OPEN имеет два формата:
- DOC_OPEN <timеstamp> <SEARCH_ID> <DOC_ID>
- DOC_OPEN <SEARCH_ID> <DOC_ID>

В выходных данных result/opens.txt для каждого открытия документа фиксируется дата в формате `dd.MM.yyyy`, извлекаемая из метки времени (timestamp). Поэтому в случаях, когда DOC_OPEN в строке не имеет <timеstamp>, дата становится `"unknown"`.

Если в конфигурации проекта установлено `dropUnknownDates = true`, то записи с `"unknown"` не сохраняются, если же опция выключена (по умолчанию), данные с `"unknown"` остаются, чтобы не терять событие вовсе.

## Логирование

Вся информация об ошибках и необработанных форматах собирается в result/logs.txt, на данный момент файл пустой, так как все логи проанализированы и исправлена логика обработки в программе.

Добавим ошибку в один из файлов:
<img src="images/screenshot-123.png" alt="Скриншот" width="500"/>

После запуска в result/logs.txt появилась строка с именем файла и ошибкой:
```
123 | Unknown date: 01.06.202x_18:59:29
```

## Пример работы программы
```
(debug) QS total: 17137
(debug) CARD_SEARCH total: 4345
ACC_45616 CARD_SEARCH count: 24
Each document found through QS was opened each day -> result/opens.txt
Error logs -> result/logs.txt

Process finished with exit code 0
```
